{"__inputs": [], "annotations": {"list": [{"datasource": "prod", "enable": true, "hide": false, "iconColor": "#7EB26D", "limit": 100, "name": "Show Deployments in Graphs (green dashed line)", "query": "SELECT \"release\" FROM \"deployment_status\" WHERE (\"operation\"='deploy') AND (\"result\"='0') AND (\"release\" =~ /^$release/) AND $timeFilter", "showIn": 0, "tags": [], "type": "tags"}, {"datasource": "prod", "enable": false, "hide": false, "iconColor": "#E24D42", "limit": 100, "name": "Show Failed Deployments in Graphs (red dashed line)", "query": "SELECT \"release\" FROM \"deployment_status\" WHERE (\"operation\"='deploy') AND (\"result\"='2') AND (\"release\" =~ /^$release/) AND $timeFilter", "showIn": 0, "tags": [], "type": "tags Deployments in Graphs"}, {"datasource": "prod", "enable": false, "hide": false, "iconColor": "#EF843C", "limit": 100, "name": "Show Aborted Deployments in Graphs (orange dashed line)", "query": "SELECT \"release\" FROM \"deployment_status\" WHERE (\"operation\"='deploy') AND (\"result\"='1') AND (\"release\" =~ /^$release/) AND $timeFilter", "showIn": 0, "tags": [], "type": "tags"}]}, "description": "", "editable": false, "gnetId": null, "hideControls": false, "id": null, "links": [], "refresh": "10s", "rows": [{"collapse": false, "editable": true, "height": "250px", "panels": [{"aliasColors": {}, "bars": true, "datasource": "prod", "description": null, "editable": false, "error": false, "fill": 1, "grid": {"threshold1": null, "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold2": null, "threshold2Color": "rgba(234, 112, 112, 0.22)"}, "id": 1, "isNew": true, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false, "alignAsTable": false, "hideEmpty": false, "hideZero": false, "rightSide": false, "sideWidth": null, "sort": null, "sortDesc": false}, "lines": false, "linewidth": 2, "links": [], "minSpan": null, "nullPointMode": "connected", "options": {"dataLinks": [], "alertThreshold": false}, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "repeat": null, "seriesOverrides": [{"alias": "Failed notifications", "yaxis": 2, "color": "#E24D42"}, {"alias": "Published notifications", "zindex": 1}, {"alias": "Active subscriptions", "hiddenSeries": true, "legend": false}], "span": 4, "stack": false, "steppedLine": false, "targets": [{"query": "SELECT sum(\"number_of_messages_published_sum\") FROM \"autogen\".\"cloudwatch_aws_sns\" WHERE (\"topic_name\" = 'lambda-elasticsearch-booking-prod') GROUP BY time(5m) fill(0)", "resultFormat": "time_series", "alias": "Published notifications", "measurement": "", "rawQuery": true, "refId": "C"}, {"query": "SELECT sum(\"number_of_notifications_delivered_sum\") FROM \"autogen\".\"cloudwatch_aws_sns\" WHERE (\"topic_name\" = 'lambda-elasticsearch-booking-prod') GROUP BY time(5m) fill(0)", "resultFormat": "time_series", "alias": "Delivered notifications", "measurement": "", "rawQuery": true, "refId": "D"}, {"query": "SELECT sum(\"number_of_notifications_failed_sum\") FROM \"autogen\".\"cloudwatch_aws_sns\" WHERE (\"topic_name\" = 'lambda-elasticsearch-booking-prod') GROUP BY time(5m) fill(0)", "resultFormat": "time_series", "alias": "Failed notifications", "measurement": "", "rawQuery": true, "refId": "B"}, {"query": "SELECT (sum(\"number_of_notifications_delivered_sum\") / sum(\"number_of_messages_published_sum\")) FROM \"autogen\".\"cloudwatch_aws_sns\" WHERE (\"topic_name\" = 'lambda-elasticsearch-booking-prod') GROUP BY time(10m) fill(previous)", "resultFormat": "time_series", "alias": "Active subscriptions", "measurement": "", "rawQuery": true, "refId": "A"}], "timeFrom": null, "timeShift": null, "title": "lambda-elasticsearch-booking-prod", "tooltip": {"msResolution": true, "shared": true, "sort": 0, "value_type": "cumulative"}, "transparent": true, "type": "graph", "xaxis": {"show": true}, "yaxes": [{"decimals": null, "format": "short", "label": null, "logBase": 1, "max": null, "min": 0, "show": true}, {"decimals": null, "format": "short", "label": null, "logBase": 1, "max": null, "min": 0, "show": true}], "alert": {"conditions": [{"evaluator": {"type": "gt", "params": [0]}, "operator": {"type": "or"}, "query": {"model": {"expr": "", "target": "", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "", "metric": "", "refId": "A", "step": 10, "instant": false, "datasource": ""}, "params": ["A", "5m", "now"]}, "reducer": {"params": [], "type": "max"}, "type": "query"}, {"evaluator": {"type": "gt", "params": [0]}, "operator": {"type": "or"}, "query": {"model": {"expr": "", "target": "", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "", "metric": "", "refId": "B", "step": 10, "instant": false, "datasource": ""}, "params": ["B", "5m", "now"]}, "reducer": {"params": [], "type": "max"}, "type": "query"}], "executionErrorState": "alerting", "frequency": "60s", "handler": 1, "message": "lambda-elasticsearch-booking-prod seems to have no subscriptions or failed deliveries", "name": "lambda-elasticsearch-booking-prod alerts", "noDataState": "alerting", "notifications": [], "for": "5m"}}, {"aliasColors": {}, "bars": true, "datasource": "prod", "description": null, "editable": false, "error": false, "fill": 1, "grid": {"threshold1": null, "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold2": null, "threshold2Color": "rgba(234, 112, 112, 0.22)"}, "id": 2, "isNew": true, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false, "alignAsTable": false, "hideEmpty": false, "hideZero": false, "rightSide": false, "sideWidth": null, "sort": null, "sortDesc": false}, "lines": false, "linewidth": 2, "links": [], "minSpan": null, "nullPointMode": "connected", "options": {"dataLinks": [], "alertThreshold": false}, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "repeat": null, "seriesOverrides": [{"alias": "Failed notifications", "yaxis": 2, "color": "#E24D42"}, {"alias": "Published notifications", "zindex": 1}, {"alias": "Active subscriptions", "hiddenSeries": true, "legend": false}], "span": 4, "stack": false, "steppedLine": false, "targets": [{"query": "SELECT sum(\"number_of_messages_published_sum\") FROM \"autogen\".\"cloudwatch_aws_sns\" WHERE (\"topic_name\" = 'lambda-pretty-mail-payment-prod') GROUP BY time(5m) fill(0)", "resultFormat": "time_series", "alias": "Published notifications", "measurement": "", "rawQuery": true, "refId": "C"}, {"query": "SELECT sum(\"number_of_notifications_delivered_sum\") FROM \"autogen\".\"cloudwatch_aws_sns\" WHERE (\"topic_name\" = 'lambda-pretty-mail-payment-prod') GROUP BY time(5m) fill(0)", "resultFormat": "time_series", "alias": "Delivered notifications", "measurement": "", "rawQuery": true, "refId": "D"}, {"query": "SELECT sum(\"number_of_notifications_failed_sum\") FROM \"autogen\".\"cloudwatch_aws_sns\" WHERE (\"topic_name\" = 'lambda-pretty-mail-payment-prod') GROUP BY time(5m) fill(0)", "resultFormat": "time_series", "alias": "Failed notifications", "measurement": "", "rawQuery": true, "refId": "B"}, {"query": "SELECT (sum(\"number_of_notifications_delivered_sum\") / sum(\"number_of_messages_published_sum\")) FROM \"autogen\".\"cloudwatch_aws_sns\" WHERE (\"topic_name\" = 'lambda-pretty-mail-payment-prod') GROUP BY time(10m) fill(previous)", "resultFormat": "time_series", "alias": "Active subscriptions", "measurement": "", "rawQuery": true, "refId": "A"}], "timeFrom": null, "timeShift": null, "title": "lambda-pretty-mail-payment-prod", "tooltip": {"msResolution": true, "shared": true, "sort": 0, "value_type": "cumulative"}, "transparent": true, "type": "graph", "xaxis": {"show": true}, "yaxes": [{"decimals": null, "format": "short", "label": null, "logBase": 1, "max": null, "min": 0, "show": true}, {"decimals": null, "format": "short", "label": null, "logBase": 1, "max": null, "min": 0, "show": true}], "alert": {"conditions": [{"evaluator": {"type": "gt", "params": [0]}, "operator": {"type": "or"}, "query": {"model": {"expr": "", "target": "", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "", "metric": "", "refId": "A", "step": 10, "instant": false, "datasource": ""}, "params": ["A", "5m", "now"]}, "reducer": {"params": [], "type": "max"}, "type": "query"}, {"evaluator": {"type": "gt", "params": [0]}, "operator": {"type": "or"}, "query": {"model": {"expr": "", "target": "", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "", "metric": "", "refId": "B", "step": 10, "instant": false, "datasource": ""}, "params": ["B", "5m", "now"]}, "reducer": {"params": [], "type": "max"}, "type": "query"}], "executionErrorState": "alerting", "frequency": "60s", "handler": 1, "message": "lambda-pretty-mail-payment-prod seems to have no subscriptions or failed deliveries", "name": "lambda-pretty-mail-payment-prod alerts", "noDataState": "alerting", "notifications": [], "for": "5m"}}, {"aliasColors": {}, "bars": true, "datasource": "prod", "description": null, "editable": false, "error": false, "fill": 1, "grid": {"threshold1": null, "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold2": null, "threshold2Color": "rgba(234, 112, 112, 0.22)"}, "id": 3, "isNew": true, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false, "alignAsTable": false, "hideEmpty": false, "hideZero": false, "rightSide": false, "sideWidth": null, "sort": null, "sortDesc": false}, "lines": false, "linewidth": 2, "links": [], "minSpan": null, "nullPointMode": "connected", "options": {"dataLinks": [], "alertThreshold": false}, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "repeat": null, "seriesOverrides": [{"alias": "Failed notifications", "yaxis": 2, "color": "#E24D42"}, {"alias": "Published notifications", "zindex": 1}, {"alias": "Active subscriptions", "hiddenSeries": true, "legend": false}], "span": 4, "stack": false, "steppedLine": false, "targets": [{"query": "SELECT sum(\"number_of_messages_published_sum\") FROM \"autogen\".\"cloudwatch_aws_sns\" WHERE (\"topic_name\" = 'lambda-offer-created-prod') GROUP BY time(5m) fill(0)", "resultFormat": "time_series", "alias": "Published notifications", "measurement": "", "rawQuery": true, "refId": "C"}, {"query": "SELECT sum(\"number_of_notifications_delivered_sum\") FROM \"autogen\".\"cloudwatch_aws_sns\" WHERE (\"topic_name\" = 'lambda-offer-created-prod') GROUP BY time(5m) fill(0)", "resultFormat": "time_series", "alias": "Delivered notifications", "measurement": "", "rawQuery": true, "refId": "D"}, {"query": "SELECT sum(\"number_of_notifications_failed_sum\") FROM \"autogen\".\"cloudwatch_aws_sns\" WHERE (\"topic_name\" = 'lambda-offer-created-prod') GROUP BY time(5m) fill(0)", "resultFormat": "time_series", "alias": "Failed notifications", "measurement": "", "rawQuery": true, "refId": "B"}, {"query": "SELECT (sum(\"number_of_notifications_delivered_sum\") / sum(\"number_of_messages_published_sum\")) FROM \"autogen\".\"cloudwatch_aws_sns\" WHERE (\"topic_name\" = 'lambda-offer-created-prod') GROUP BY time(10m) fill(previous)", "resultFormat": "time_series", "alias": "Active subscriptions", "measurement": "", "rawQuery": true, "refId": "A"}], "timeFrom": null, "timeShift": null, "title": "lambda-offer-created-prod", "tooltip": {"msResolution": true, "shared": true, "sort": 0, "value_type": "cumulative"}, "transparent": true, "type": "graph", "xaxis": {"show": true}, "yaxes": [{"decimals": null, "format": "short", "label": null, "logBase": 1, "max": null, "min": 0, "show": true}, {"decimals": null, "format": "short", "label": null, "logBase": 1, "max": null, "min": 0, "show": true}], "alert": {"conditions": [{"evaluator": {"type": "gt", "params": [0]}, "operator": {"type": "or"}, "query": {"model": {"expr": "", "target": "", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "", "metric": "", "refId": "A", "step": 10, "instant": false, "datasource": ""}, "params": ["A", "5m", "now"]}, "reducer": {"params": [], "type": "max"}, "type": "query"}, {"evaluator": {"type": "gt", "params": [0]}, "operator": {"type": "or"}, "query": {"model": {"expr": "", "target": "", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "", "metric": "", "refId": "B", "step": 10, "instant": false, "datasource": ""}, "params": ["B", "5m", "now"]}, "reducer": {"params": [], "type": "max"}, "type": "query"}], "executionErrorState": "alerting", "frequency": "60s", "handler": 1, "message": "lambda-offer-created-prod seems to have no subscriptions or failed deliveries", "name": "lambda-offer-created-prod alerts", "noDataState": "alerting", "notifications": [], "for": "5m"}}], "showTitle": false, "title": "New row", "repeat": null}, {"collapse": false, "editable": true, "height": "250px", "panels": [{"aliasColors": {}, "bars": false, "datasource": "prod", "description": null, "editable": false, "error": false, "fill": 1, "grid": {"threshold1": null, "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold2": null, "threshold2Color": "rgba(234, 112, 112, 0.22)"}, "id": 4, "isNew": true, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false, "alignAsTable": false, "hideEmpty": false, "hideZero": false, "rightSide": false, "sideWidth": null, "sort": null, "sortDesc": false}, "lines": true, "linewidth": 2, "links": [], "minSpan": null, "nullPointMode": "connected", "options": {"dataLinks": [], "alertThreshold": false}, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "repeat": null, "seriesOverrides": [{"alias": "Invocations - Sum", "yaxis": 2, "lines": false, "points": false, "bars": true, "color": "#7EB26D"}, {"alias": "Errors - Sum", "yaxis": 2, "lines": false, "points": false, "bars": true, "color": "#E24D42"}, {"alias": "Duration - Minimum", "color": "#C8F2C2", "lines": false}, {"alias": "Duration - Average", "color": "#FADE2A", "fill": 0}, {"alias": "Duration - Maximum", "color": "rgb(77, 159, 179)", "fillBelowTo": "Duration - Minimum", "lines": false}], "span": 12, "stack": false, "steppedLine": false, "targets": [{"query": "SELECT min(\"duration_minimum\") FROM \"autogen\".\"cloudwatch_aws_lambda\" WHERE (\"function_name\" = 'sfn-gateway-prod') GROUP BY time(5m) fill(null)", "resultFormat": "time_series", "alias": "Duration - Minimum", "measurement": "", "rawQuery": true, "refId": "B"}, {"query": "SELECT mean(\"duration_average\") FROM \"autogen\".\"cloudwatch_aws_lambda\" WHERE (\"function_name\" = 'sfn-gateway-prod') GROUP BY time(5m) fill(null)", "resultFormat": "time_series", "alias": "Duration - Average", "measurement": "", "rawQuery": true, "refId": "C"}, {"query": "SELECT max(\"duration_maximum\") FROM \"autogen\".\"cloudwatch_aws_lambda\" WHERE (\"function_name\" = 'sfn-gateway-prod') GROUP BY time(5m) fill(null)", "resultFormat": "time_series", "alias": "Duration - Maximum", "measurement": "", "rawQuery": true, "refId": "D"}, {"query": "SELECT max(\"invocations_sum\") FROM \"autogen\".\"cloudwatch_aws_lambda\" WHERE (\"function_name\" = 'sfn-gateway-prod') GROUP BY time(1m) fill(null)", "resultFormat": "time_series", "alias": "Invocations - Sum", "measurement": "", "rawQuery": true, "refId": "E"}, {"query": "SELECT max(\"errors_sum\") FROM \"autogen\".\"cloudwatch_aws_lambda\" WHERE (\"function_name\" = 'sfn-gateway-prod') GROUP BY time(1m) fill(null)", "resultFormat": "time_series", "alias": "Errors - Sum", "measurement": "", "rawQuery": true, "refId": "A"}], "timeFrom": null, "timeShift": null, "title": "sfn-gateway-prod", "tooltip": {"msResolution": true, "shared": true, "sort": 0, "value_type": "cumulative"}, "transparent": true, "type": "graph", "xaxis": {"show": true}, "yaxes": [{"decimals": 2, "format": "ms", "label": null, "logBase": 1, "max": null, "min": 0, "show": true}, {"decimals": 2, "format": "short", "label": null, "logBase": 1, "max": null, "min": 0, "show": true}], "alert": {"conditions": [{"evaluator": {"type": "gt", "params": [0]}, "operator": {"type": "and"}, "query": {"model": {"expr": "", "target": "", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "", "metric": "", "refId": "A", "step": 10, "instant": false, "datasource": ""}, "params": ["A", "5m", "now"]}, "reducer": {"params": [], "type": "max"}, "type": "query"}], "executionErrorState": "alerting", "frequency": "60s", "handler": 1, "message": "sfn-gateway-prod is having invocation errors", "name": "sfn-gateway-prod Invocation Errors", "noDataState": "alerting", "notifications": [], "for": "5m"}}], "showTitle": false, "title": "New row", "repeat": null}, {"collapse": false, "editable": true, "height": "250px", "panels": [{"aliasColors": {}, "bars": false, "datasource": "prod", "description": null, "editable": false, "error": false, "fill": 1, "grid": {"threshold1": null, "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold2": null, "threshold2Color": "rgba(234, 112, 112, 0.22)"}, "id": 5, "isNew": true, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false, "alignAsTable": false, "hideEmpty": false, "hideZero": false, "rightSide": false, "sideWidth": null, "sort": null, "sortDesc": false}, "lines": true, "linewidth": 2, "links": [], "minSpan": null, "nullPointMode": "connected", "options": {"dataLinks": [], "alertThreshold": false}, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "repeat": null, "seriesOverrides": [], "span": 12, "stack": false, "steppedLine": false, "targets": [{"query": "SELECT max(\"approximate_number_of_messages_visible_maximum\") FROM \"autogen\".\"cloudwatch_aws_sqs\" WHERE (\"queue_name\" = 'sfn-gateway-prod-dlq') GROUP BY time(1m) fill(previous)", "resultFormat": "time_series", "alias": "Approximate number of messages available", "measurement": "", "rawQuery": true, "refId": "A"}], "timeFrom": null, "timeShift": null, "title": "sfn-gateway-prod-dlq", "tooltip": {"msResolution": true, "shared": true, "sort": 0, "value_type": "cumulative"}, "transparent": true, "type": "graph", "xaxis": {"show": true}, "yaxes": [{"decimals": null, "format": "short", "label": null, "logBase": 1, "max": null, "min": 0, "show": true}, {"decimals": null, "format": "short", "label": null, "logBase": 1, "max": null, "min": 0, "show": true}], "alert": {"conditions": [{"evaluator": {"type": "gt", "params": [0]}, "operator": {"type": "and"}, "query": {"model": {"expr": "", "target": "", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "", "metric": "", "refId": "A", "step": 10, "instant": false, "datasource": ""}, "params": ["A", "5m", "now"]}, "reducer": {"params": [], "type": "max"}, "type": "query"}], "executionErrorState": "alerting", "frequency": "60s", "handler": 1, "message": "sfn-gateway-prod-dlq is having messages", "name": "sfn-gateway-prod-dlq messages", "noDataState": "alerting", "notifications": [], "for": "5m"}}], "showTitle": false, "title": "New row", "repeat": null}], "schemaVersion": 12, "sharedCrosshair": true, "style": "dark", "tags": ["lambda", "sqs", "prod"], "templating": {"list": [{"allValue": "", "current": {"text": "All", "value": ["$__all"]}, "datasource": "prod", "definition": "SELECT \"release\" FROM \"deployment_status\" WHERE $timeFilter", "hide": 2, "includeAll": true, "label": "Filter by Branch/Release", "multi": true, "name": "release", "options": [], "query": "SELECT \"release\" FROM \"deployment_status\" WHERE $timeFilter", "refresh": 2, "regex": "", "skipUrlSync": false, "sort": 1, "tagValuesQuery": "", "tags": [], "tagsQuery": "", "type": "query", "useTags": false}]}, "title": "sfn-gateway-prod", "time": {"from": "now-1h", "to": "now"}, "timepicker": {"refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"], "time_options": ["5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d"]}, "timezone": "", "version": 0, "uid": null}
